import"../chunks/Bzak7iHL.js";import{o as L,a as _}from"../chunks/Da2SbPGF.js";import{p as E,s as m,a as I,f as u,d as p,g as P,h as r,i as n,c as b,r as M}from"../chunks/DzBT8ttv.js";import{i as N}from"../chunks/CnlBk1NC.js";import{g as V}from"../chunks/BL_xpT-s.js";import"../chunks/Bmagc3Ye.js";var j=u('<div class="flex items-center justify-center w-full h-full"><div class="text-white text-xl">비디오 로딩 중...</div></div>'),A=u('<div class="w-screen h-screen bg-black fixed top-0 left-0 z-50 overflow-hidden"><!></div>');function D(v,w){E(w,!0);let t=m(I([])),s=m(0);L(async()=>{if(await h(),typeof window<"u"&&r(t).length>0){const e=new URLSearchParams(window.location.search),o=e.get("v"),c=e.get("video"),a=o??c;if(a!=null){const f=parseInt(a);if(!isNaN(f))n(s,Math.max(0,Math.min(f,r(t).length-1)),!0);else{const x=a.toString().toLowerCase(),l=r(t).findIndex(k=>k.name.replace(/\.[^/.]+$/,"").toLowerCase()===x);l>=0&&n(s,l,!0)}}console.log("URL 파라미터 처리 완료:",{vParam:o,videoParam:c,raw:a,currentVideoIndex:r(s)})}document.addEventListener("keydown",d)}),_(()=>{typeof document<"u"&&document.removeEventListener("keydown",d)});function d(e){e.key==="Escape"&&V("/")}async function h(){try{const e=await fetch("api/videos");if(!e.ok)throw new Error("비디오 목록을 불러올 수 없습니다.");const o=await e.json();n(t,Array.isArray(o)?o:[],!0)}catch(e){console.error("비디오 로드 실패:",e),n(t,[],!0)}}var i=A(),y=b(i);{var g=e=>{var o=j();p(e,o)};N(y,e=>{e(g)})}M(i),p(v,i),P()}export{D as component};
