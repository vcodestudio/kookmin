import"./Bzak7iHL.js";import{d as Et,o as At,s as ee,e as le}from"./Da2SbPGF.js";import{R as Ge,G as Tt,O as we,l as F,a8 as Vt,H as It,h as e,v as Ct,J as Mt,K as Nt,M as je,Q as ke,Z as se,a9 as Rt,aa as Dt,T as Te,W as Pt,U as St,ab as Lt,ac as Ft,ad as Ke,ae as Je,af as Ot,ag as Ht,X as Qe,Y as Bt,ah as jt,ai as Kt,aj as Ee,ak as We,al as Ut,am as qt,an as zt,ao as Yt,w as Xt,p as Gt,s as L,a as Jt,a3 as Ue,i,f as P,t as ie,d as V,g as Qt,ap as Wt,c as k,r as b,j as qe,k as ze,b as M,aq as Zt}from"./DzBT8ttv.js";import{i as U,b as Ye}from"./CnlBk1NC.js";import{s as $t}from"./c0lOkYTd.js";import{p as G}from"./DGNx5oX0.js";function ea(l,r){return r}function ta(l,r,t){for(var f=l.items,w=[],u=r.length,h=0;h<u;h++)qt(r[h].e,w,!0);var g=u>0&&w.length===0&&t!==null;if(g){var y=t.parentNode;zt(y),y.append(t),f.clear(),j(l,r[0].prev,r[u-1].next)}Yt(w,()=>{for(var s=0;s<u;s++){var _=r[s];g||(f.delete(_.k),j(l,_.prev,_.next)),We(_.e,!g)}})}function aa(l,r,t,f,w,u=null){var h=l,g={flags:r,items:new Map,first:null};{var y=l;h=F?we(Vt(y)):y.appendChild(Ge())}F&&It();var s=null,_=!1,o=new Map,d=Ct(()=>{var v=t();return Ot(v)?v:v==null?[]:Je(v)}),E,n;function c(){ra(n,E,g,o,h,w,r,f,t),u!==null&&(E.length===0?s?Qe(s):s=Te(()=>u(h)):s!==null&&Bt(s,()=>{s=null}))}Tt(()=>{n??(n=Xt),E=e(d);var v=E.length;if(_&&v===0)return;_=v===0;let R=!1;if(F){var T=Mt(h)===Nt;T!==(v===0)&&(h=je(),we(h),ke(!1),R=!0)}if(F){for(var p=null,x,A=0;A<v;A++){if(se.nodeType===Rt&&se.data===Dt){h=se,R=!0,ke(!1);break}var I=E[A],D=f(I,A);x=Ve(se,g,p,null,I,D,A,w,r,t),g.items.set(D,x),p=x}v>0&&we(je())}if(F)v===0&&u&&(s=Te(()=>u(h)));else if(Pt()){var O=new Set,C=St;for(A=0;A<v;A+=1){I=E[A],D=f(I,A);var Y=g.items.get(D)??o.get(D);Y?Ze(Y,I,A):(x=Ve(null,g,null,null,I,D,A,w,r,t,!0),o.set(D,x)),O.add(D)}for(const[K,q]of g.items)O.has(K)||C.skipped_effects.add(q.e);C.add_callback(c)}else c();R&&ke(!0),e(d)}),F&&(h=se)}function ra(l,r,t,f,w,u,h,g,y){var s=r.length,_=t.items,o=t.first,d=o,E,n=null,c=[],v=[],R,T,p,x;for(x=0;x<s;x+=1){if(R=r[x],T=g(R,x),p=_.get(T),p===void 0){var A=f.get(T);if(A!==void 0){f.delete(T),_.set(T,A);var I=n?n.next:d;j(t,n,A),j(t,A,I),Ae(A,I,w),n=A}else{var D=d?d.e.nodes_start:w;n=Ve(D,t,n,n===null?t.first:n.next,R,T,x,u,h,y)}_.set(T,n),c=[],v=[],d=n.next;continue}if(Ze(p,R,x),(p.e.f&Ee)!==0&&Qe(p.e),p!==d){if(E!==void 0&&E.has(p)){if(c.length<v.length){var O=v[0],C;n=O.prev;var Y=c[0],K=c[c.length-1];for(C=0;C<c.length;C+=1)Ae(c[C],O,w);for(C=0;C<v.length;C+=1)E.delete(v[C]);j(t,Y.prev,K.next),j(t,n,Y),j(t,K,O),d=O,n=K,x-=1,c=[],v=[]}else E.delete(p),Ae(p,d,w),j(t,p.prev,p.next),j(t,p,n===null?t.first:n.next),j(t,n,p),n=p;continue}for(c=[],v=[];d!==null&&d.k!==T;)(d.e.f&Ee)===0&&(E??(E=new Set)).add(d),v.push(d),d=d.next;if(d===null)continue;p=d}c.push(p),n=p,d=p.next}if(d!==null||E!==void 0){for(var q=E===void 0?[]:Je(E);d!==null;)(d.e.f&Ee)===0&&q.push(d),d=d.next;var ne=q.length;if(ne>0){var te=s===0?w:null;ta(t,q,te)}}l.first=t.first&&t.first.e,l.last=n&&n.e;for(var X of f.values())We(X.e);f.clear()}function Ze(l,r,t,f){Lt(l.v,r),l.i=t}function Ve(l,r,t,f,w,u,h,g,y,s,_){var o=(y&jt)!==0,d=(y&Kt)===0,E=o?d?Ft(w,!1,!1):Ke(w):w,n=(y&Ht)===0?h:Ke(h),c={i:n,v:E,k:u,a:null,e:null,prev:t,next:f};try{if(l===null){var v=document.createDocumentFragment();v.append(l=Ge())}return c.e=Te(()=>g(l,E,n,s),F),c.e.prev=t&&t.e,c.e.next=f&&f.e,t===null?_||(r.first=c):(t.next=c,t.e.next=c.e),f!==null&&(f.prev=c,f.e.prev=c.e),c}finally{}}function Ae(l,r,t){for(var f=l.next?l.next.e.nodes_start:t,w=r?r.e.nodes_start:t,u=l.e.nodes_start;u!==null&&u!==f;){var h=Ut(u);w.before(u),u=h}}function j(l,r,t){r===null?l.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function la(l,r,t){var f=l==null?"":""+l;return f===""?null:f}function sa(l,r){return l==null?null:String(l)}function z(l,r,t,f,w,u){var h=l.__className;if(F||h!==t||h===void 0){var g=la(t);(!F||g!==l.getAttribute("class"))&&(g==null?l.removeAttribute("class"):l.className=g),l.__className=t}return u}function Xe(l,r,t,f){var w=l.__style;if(F||w!==r){var u=sa(r);(!F||u!==l.getAttribute("style"))&&(u==null?l.removeAttribute("style"):l.style.cssText=u),l.__style=r}return f}function ia(l,r){console.log("비디오 클릭됨"),r()}var na=P('<div class="flex justify-center items-center h-64"><div class="text-xl text-white">비디오 목록을 불러오는 중...</div></div>'),oa=P('<div class="bg-red-900 border border-red-400 text-red-200 px-4 py-3 text-center"><p class="font-bold">오류 발생</p> <p> </p></div>'),da=P('<div class="bg-yellow-900 border border-yellow-400 text-yellow-200 px-4 py-3 text-center"><p class="font-bold">비디오 없음</p> <p>static/videos 폴더에 비디오 파일을 추가해주세요.</p></div>'),va=P('<button class="absolute top-4 right-4 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2  transition-all duration-300 backdrop-blur-sm" aria-label="전체화면"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg></button>'),ca=P('<div class="absolute inset-0 flex items-center justify-center pointer-events-none"><div class="bg-black bg-opacity-50 rounded-full p-4"><svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></div></div>'),fa=P('<div class="absolute inset-0 flex items-center justify-center cursor-pointer bg-black bg-opacity-30 hover:bg-opacity-40 transition-all duration-300"><div class="text-center"><div class="mb-4"><svg class="w-16 h-16 text-white mx-auto opacity-80" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></div> <p class="text-white text-xl font-medium drop-shadow-lg">플레이하려면 화면을 클릭해주세요</p></div></div>'),ua=P('<div class="text-sm text-white flex gap-8"><div class="flex items-center gap-2"><kbd class="px-2 py-1 bg-gray-800 border border-white rounded text-xs w-15 text-center flex-shrink-0">Space</kbd> <span class="flex-1">재생/일시정지</span></div> <div class="flex items-center gap-2"><kbd class="px-2 py-1 bg-gray-800 border border-white rounded text-xs w-15 text-center flex-shrink-0">Cmd+E</kbd> <span class="flex-1">다음 비디오로 건너뛰기</span></div> <div class="flex items-center gap-2"><kbd class="px-2 py-1 bg-gray-800 border border-white rounded text-xs w-15 text-center flex-shrink-0">F</kbd> <span class="flex-1">전체화면</span></div></div>'),ha=P('<div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>'),pa=Zt('<svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>'),ga=P('<div role="button" tabindex="0"><div class="flex items-center justify-between"><div class="flex-1 min-w-0"><p class="text-sm font-medium text-white truncate"> </p></div> <div class="flex-shrink-0 w-4 flex items-center justify-center"><!></div></div></div>'),_a=P('<div class="w-full lg:w-80 xl:w-96 space-y-4 flex-shrink-0"><div class="bg-black border border-white shadow-lg p-6"><div class="mb-4"><h3 class="text-xl font-bold text-white mb-2">현재 재생 중</h3> <p class="text-white"> </p> <p class="text-sm text-gray-300"> </p></div> <div class="flex items-center space-x-2 text-sm"><div class="flex items-center space-x-1"><div></div> <span class="text-white"> </span></div></div></div> <div class="bg-black border border-white shadow-lg p-6"><h3 class="text-lg font-bold text-white mb-4">재생 목록</h3> <div class="space-y-2 max-h-96 overflow-y-auto"></div></div></div>'),ma=P('<div><div><div><div><video class="w-full h-full object-contain transition-opacity duration-300 cursor-pointer" preload="metadata" playsinline=""></video> <div class="absolute inset-0 flex items-center justify-center pointer-events-none transition-opacity duration-300"><h2 class="text-white text-4xl lg:text-5xl font-bold text-center px-4 drop-shadow-lg"> </h2></div> <!> <!> <!></div> <!></div></div> <!></div>',2),ya=P("<div><div><!></div></div>");function Ta(l,r){Gt(r,!0);let t=G(r,"isPlaying",15,!1),f=G(r,"showUI",3,!0),w=G(r,"forceAspectRatio",3,!0),u=G(r,"fullscreen",3,!1),h=G(r,"autoStart",3,!1),g=G(r,"videos",3,null),y=G(r,"currentVideoIndex",3,null),s=L(Jt([])),_=L(0),o=L(void 0),d=L(!0),E=L(null),n=L(0),c=L(0),v=L(!1),R=L(!1),T=L(void 0),p=L(!1);const x=Wt(()=>e(s)[e(_)]);At(async()=>(Array.isArray(g())&&g().length>0?(i(s,g()),typeof y()=="number"&&y()>=0&&y()<e(s).length&&i(_,y()),e(s).length>0&&h()&&await X(),i(d,!1)):(await A(),h()&&e(s).length>0&&I()),document.addEventListener("keydown",ne),document.addEventListener("fullscreenchange",q),()=>{document.removeEventListener("keydown",ne),document.removeEventListener("fullscreenchange",q)})),Ue(()=>{Array.isArray(g())&&g().length>0&&(e(s).length===0||e(s)!==g())&&(i(s,g()),i(d,!1),h()&&e(s).length>0&&!t()&&!e(p)&&(typeof y()=="number"&&y()>=0&&y()<e(s).length&&i(_,y()),X()))}),Ue(()=>{h()&&Array.isArray(e(s))&&e(s).length>0&&typeof y()=="number"&&y()>=0&&y()<e(s).length&&y()!==e(_)&&te(y())});async function A(){try{i(d,!0);const a=await fetch("/api/videos");if(!a.ok)throw new Error("비디오 목록을 불러올 수 없습니다.");const S=await a.json();i(s,Array.isArray(S)?S:[],!0)}catch(a){console.error("비디오 목록 로드 실패:",a),i(s,[],!0)}finally{i(d,!1),h()&&e(s).length>0&&!t()&&!e(p)&&X()}}async function I(){if(!e(x)||!e(o)){console.log("비디오 시작 실패 - currentVideo:",e(x),"videoElement:",e(o));return}console.log("비디오 시작:",e(x).displayName),i(n,0),i(c,1),t(!1),i(v,!1),e(o).load();try{await new Promise((a,S)=>{const ae=setTimeout(()=>S(new Error("로딩 타임아웃")),1e4);e(o).addEventListener("loadeddata",()=>{clearTimeout(ae),a()},{once:!0})}),console.log("비디오 로드 완료, 5초 후 재생 시작..."),setTimeout(async()=>{if(e(o))try{console.log("비디오 재생 시도..."),e(o).muted=!1,await e(o).play(),i(n,1),i(c,0),t(!0),console.log("비디오 재생 성공!")}catch(a){console.error("비디오 재생 실패:",a),console.log("자동재생이 차단되었습니다. 수동 재생 버튼을 클릭하세요."),i(n,.3),i(c,.5)}},5e3)}catch(a){console.error("비디오 로딩 실패:",a),i(E,"비디오를 로드할 수 없습니다: "+a.message)}}function D(){console.log("비디오 종료됨"),t()&&(t(!1),i(n,0),setTimeout(()=>{O()},1e3))}function O(){console.log("다음 비디오로 전환"),i(_,(e(_)+1)%e(s).length),I()}function C(){if(console.log("재생/일시정지 토글 - isPlaying:",t(),"isPaused:",e(v)),!e(o)){console.log("비디오 엘리먼트가 없습니다.");return}if(!t()){console.log("아직 재생이 시작되지 않았습니다.");return}e(v)?(console.log("재생 재개"),e(o).play(),i(v,!1)):(console.log("일시정지"),e(o).pause(),i(v,!0))}function Y(){console.log("다음 비디오로 건너뛰기"),!(!e(o)||!t())&&(t(!1),i(n,0),setTimeout(()=>{O()},300))}function K(){e(T)&&(document.fullscreenElement?document.exitFullscreen():e(T).requestFullscreen())}function q(){i(R,!!document.fullscreenElement)}function ne(a){console.log("키 입력:",a.key,a.code),(a.metaKey||a.ctrlKey)&&a.key==="e"&&(a.preventDefault(),Y()),a.code==="Space"&&(a.preventDefault(),C()),a.key==="Escape"&&e(R)&&K(),(a.key==="f"||a.key==="F")&&(a.preventDefault(),K())}function te(a){console.log("비디오 선택:",a),!(a<0||a>=e(s).length)&&(t()&&e(o)&&e(o).pause(),i(_,a,!0),I())}async function X(){if(!e(x)||!e(o)){console.log("비디오 시작 실패 - currentVideo:",e(x),"videoElement:",e(o));return}console.log("즉시 비디오 시작:",e(x).displayName),i(n,0),i(c,1),t(!0),i(v,!1),i(p,!0),e(o).load();try{await new Promise((a,S)=>{const ae=setTimeout(()=>S(new Error("로딩 타임아웃")),1e4);e(o).addEventListener("loadeddata",()=>{clearTimeout(ae),a()},{once:!0})}),console.log("비디오 로드 완료, 즉시 재생 시작..."),setTimeout(async()=>{if(e(o))try{console.log("비디오 재생 시도..."),e(o).muted=!1,await e(o).play(),i(n,1),i(c,0),t(!0),console.log("비디오 재생 성공!")}catch(a){console.error("비디오 재생 실패:",a),i(n,.3),i(c,.8)}},3e3)}catch(a){console.error("비디오 로딩 실패:",a),i(E,"비디오를 로드할 수 없습니다: "+a.message)}}function $e(a){!Array.isArray(e(s))||e(s).length===0||a<0||a>=e(s).length||(t()&&e(o)&&e(o).pause(),i(_,a,!0),I())}async function et(a){!Array.isArray(e(s))||e(s).length===0||a<0||a>=e(s).length||(t()&&e(o)&&e(o).pause(),i(_,a,!0),await X())}var oe=ya(),he=k(oe),tt=k(he);{var at=a=>{var S=na();V(a,S)},rt=a=>{var S=qe(),ae=ze(S);{var lt=J=>{var Q=oa(),de=M(k(Q),2),pe=k(de,!0);b(de),b(Q),ie(()=>ee(pe,e(E))),V(J,Q)},st=J=>{var Q=qe(),de=ze(Q);{var pe=W=>{var Z=da();V(W,Z)},it=W=>{var Z=ma(),ve=k(Z),ge=k(ve),re=k(ge),H=k(re);H.__click=[ia,C],Ye(H,m=>i(o,m),()=>e(o));var ce=M(H,2),Ie=k(ce),nt=k(Ie,!0);b(Ie),b(ce);var Ce=M(ce,2);{var ot=m=>{var N=va();N.__click=K,V(m,N)};U(Ce,m=>{e(R)||m(ot)})}var Me=M(Ce,2);{var dt=m=>{var N=ca();V(m,N)};U(Me,m=>{e(v)&&t()&&m(dt)})}var vt=M(Me,2);{var ct=m=>{var N=fa();N.__click=X,V(m,N)};U(vt,m=>{!t()&&!e(p)&&!h()&&m(ct)})}b(re),Ye(re,m=>i(T,m),()=>e(T));var ft=M(re,2);{var ut=m=>{var N=ua();V(m,N)};U(ft,m=>{f()&&m(ut)})}b(ge),b(ve);var ht=M(ve,2);{var pt=m=>{var N=_a(),_e=k(N),me=k(_e),ye=M(k(me),2),gt=k(ye,!0);b(ye);var Ne=M(ye,2),_t=k(Ne);b(Ne),b(me);var Re=M(me,2),De=k(Re),Pe=k(De),Se=M(Pe,2),mt=k(Se,!0);b(Se),b(De),b(Re),b(_e);var Le=M(_e,2),Fe=M(k(Le),2);aa(Fe,21,()=>e(s),ea,(fe,yt,ue)=>{var $=ga();$.__click=()=>te(ue),$.__keydown=B=>{(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),te(ue))};var Oe=k($),xe=k(Oe),He=k(xe),xt=k(He,!0);b(He),b(xe);var Be=M(xe,2),bt=k(Be);{var wt=B=>{var be=ha();V(B,be)},kt=B=>{var be=pa();V(B,be)};U(bt,B=>{ue===e(_)?B(wt):B(kt,!1)})}b(Be),b(Oe),b($),ie(()=>{z($,1,`p-3 transition-colors duration-200 cursor-pointer ${ue===e(_)?"bg-gray-800 border-l-4 border-white":"bg-gray-900 hover:bg-gray-800 hover:shadow-white/20"}`),ee(xt,e(yt).displayName)}),V(fe,$)}),b(Fe),b(Le),b(N),ie(()=>{var fe;ee(gt,((fe=e(x))==null?void 0:fe.displayName)||"비디오 없음"),ee(_t,`${e(_)+1} / ${e(s).length??""}`),z(Pe,1,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-gray-400"}`),ee(mt,t()?e(v)?"일시정지":"재생 중":"대기 중")}),V(m,N)};U(ht,m=>{f()&&m(pt)})}b(Z),ie(()=>{var m;z(Z,1,`flex flex-col lg:flex-row gap-6 ${u()?"h-screen":"h-full"}`),z(ve,1,f()?"flex-1":"w-full h-full"),z(ge,1,`flex flex-col gap-4 ${u()?"h-full":""}`),z(re,1,`relative w-full bg-black overflow-hidden shadow-lg ${w()?"aspect-video":u()?"h-full max-h-screen":"h-full"}`),$t(H,"src",e(x)?`/videos/${e(x).name}`:""),Xe(H,`opacity: ${e(n)??""}`),Xe(ce,`opacity: ${e(c)??""}`),ee(nt,((m=e(x))==null?void 0:m.displayName)||"")}),le("ended",H,D),le("play",H,()=>{t(!0),i(v,!1),i(n,1),i(c,0),i(p,!0)}),le("pause",H,()=>{i(v,!0)}),le("waiting",H,()=>{}),le("loadeddata",H,()=>{}),V(W,Z)};U(de,W=>{e(s).length===0?W(pe):W(it,!1)},!0)}V(J,Q)};U(ae,J=>{e(E)?J(lt):J(st,!1)},!0)}V(a,S)};U(tt,a=>{e(d)?a(at):a(rt,!1)})}return b(he),b(oe),ie(()=>{z(oe,1,u()?"w-full h-full overflow-hidden":"min-h-screen bg-black"),z(he,1,u()?"w-full h-full overflow-hidden":"max-w-7xl mx-auto")}),V(l,oe),Qt({playIndex:$e,playIndexImmediately:et})}Et(["click","keydown"]);export{Ta as V,aa as e,ea as i,Xe as s};
