import"./Bzak7iHL.js";import{d as At,o as Tt,s as $,e as le}from"./Da2SbPGF.js";import{R as Je,G as It,O as ke,l as F,a8 as Vt,H as Ct,h as e,v as Mt,J as Nt,K as Pt,M as Ke,Q as Ee,Z as se,a9 as Rt,aa as St,T as Ie,W as Dt,U as Lt,ab as Ft,ac as Ot,ad as Ue,ae as Qe,af as Bt,ag as Ht,X as We,Y as jt,ah as Kt,ai as Ut,aj as Ae,ak as Ze,al as qt,am as zt,an as Yt,ao as Xt,w as Gt,p as Jt,s as L,a as Qt,a3 as qe,i,f as R,t as ie,d as V,g as Wt,ap as Zt,c as k,r as b,j as ze,k as Ye,b as M,aq as $t}from"./DzBT8ttv.js";import{i as U,b as Xe}from"./CnlBk1NC.js";import{s as ea}from"./c0lOkYTd.js";import{p as X}from"./DGNx5oX0.js";function ta(l,r){return r}function aa(l,r,t){for(var f=l.items,w=[],u=r.length,h=0;h<u;h++)zt(r[h].e,w,!0);var g=u>0&&w.length===0&&t!==null;if(g){var y=t.parentNode;Yt(y),y.append(t),f.clear(),H(l,r[0].prev,r[u-1].next)}Xt(w,()=>{for(var s=0;s<u;s++){var _=r[s];g||(f.delete(_.k),H(l,_.prev,_.next)),Ze(_.e,!g)}})}function ra(l,r,t,f,w,u=null){var h=l,g={flags:r,items:new Map,first:null};{var y=l;h=F?ke(Vt(y)):y.appendChild(Je())}F&&Ct();var s=null,_=!1,o=new Map,d=Mt(()=>{var v=t();return Bt(v)?v:v==null?[]:Qe(v)}),E,n;function c(){la(n,E,g,o,h,w,r,f,t),u!==null&&(E.length===0?s?We(s):s=Ie(()=>u(h)):s!==null&&jt(s,()=>{s=null}))}It(()=>{n??(n=Gt),E=e(d);var v=E.length;if(_&&v===0)return;_=v===0;let P=!1;if(F){var T=Nt(h)===Pt;T!==(v===0)&&(h=Ke(),ke(h),Ee(!1),P=!0)}if(F){for(var p=null,x,A=0;A<v;A++){if(se.nodeType===Rt&&se.data===St){h=se,P=!0,Ee(!1);break}var S=E[A],I=f(S,A);x=Ve(se,g,p,null,S,I,A,w,r,t),g.items.set(I,x),p=x}v>0&&ke(Ke())}if(F)v===0&&u&&(s=Ie(()=>u(h)));else if(Dt()){var j=new Set,C=Lt;for(A=0;A<v;A+=1){S=E[A],I=f(S,A);var q=g.items.get(I)??o.get(I);q?$e(q,S,A):(x=Ve(null,g,null,null,S,I,A,w,r,t,!0),o.set(I,x)),j.add(I)}for(const[Y,K]of g.items)j.has(Y)||C.skipped_effects.add(K.e);C.add_callback(c)}else c();P&&Ee(!0),e(d)}),F&&(h=se)}function la(l,r,t,f,w,u,h,g,y){var s=r.length,_=t.items,o=t.first,d=o,E,n=null,c=[],v=[],P,T,p,x;for(x=0;x<s;x+=1){if(P=r[x],T=g(P,x),p=_.get(T),p===void 0){var A=f.get(T);if(A!==void 0){f.delete(T),_.set(T,A);var S=n?n.next:d;H(t,n,A),H(t,A,S),Te(A,S,w),n=A}else{var I=d?d.e.nodes_start:w;n=Ve(I,t,n,n===null?t.first:n.next,P,T,x,u,h,y)}_.set(T,n),c=[],v=[],d=n.next;continue}if($e(p,P,x),(p.e.f&Ae)!==0&&We(p.e),p!==d){if(E!==void 0&&E.has(p)){if(c.length<v.length){var j=v[0],C;n=j.prev;var q=c[0],Y=c[c.length-1];for(C=0;C<c.length;C+=1)Te(c[C],j,w);for(C=0;C<v.length;C+=1)E.delete(v[C]);H(t,q.prev,Y.next),H(t,n,q),H(t,Y,j),d=j,n=Y,x-=1,c=[],v=[]}else E.delete(p),Te(p,d,w),H(t,p.prev,p.next),H(t,p,n===null?t.first:n.next),H(t,n,p),n=p;continue}for(c=[],v=[];d!==null&&d.k!==T;)(d.e.f&Ae)===0&&(E??(E=new Set)).add(d),v.push(d),d=d.next;if(d===null)continue;p=d}c.push(p),n=p,d=p.next}if(d!==null||E!==void 0){for(var K=E===void 0?[]:Qe(E);d!==null;)(d.e.f&Ae)===0&&K.push(d),d=d.next;var ne=K.length;if(ne>0){var oe=s===0?w:null;aa(t,K,oe)}}l.first=t.first&&t.first.e,l.last=n&&n.e;for(var ee of f.values())Ze(ee.e);f.clear()}function $e(l,r,t,f){Ft(l.v,r),l.i=t}function Ve(l,r,t,f,w,u,h,g,y,s,_){var o=(y&Kt)!==0,d=(y&Ut)===0,E=o?d?Ot(w,!1,!1):Ue(w):w,n=(y&Ht)===0?h:Ue(h),c={i:n,v:E,k:u,a:null,e:null,prev:t,next:f};try{if(l===null){var v=document.createDocumentFragment();v.append(l=Je())}return c.e=Ie(()=>g(l,E,n,s),F),c.e.prev=t&&t.e,c.e.next=f&&f.e,t===null?_||(r.first=c):(t.next=c,t.e.next=c.e),f!==null&&(f.prev=c,f.e.prev=c.e),c}finally{}}function Te(l,r,t){for(var f=l.next?l.next.e.nodes_start:t,w=r?r.e.nodes_start:t,u=l.e.nodes_start;u!==null&&u!==f;){var h=qt(u);w.before(u),u=h}}function H(l,r,t){r===null?l.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function sa(l,r,t){var f=l==null?"":""+l;return f===""?null:f}function ia(l,r){return l==null?null:String(l)}function z(l,r,t,f,w,u){var h=l.__className;if(F||h!==t||h===void 0){var g=sa(t);(!F||g!==l.getAttribute("class"))&&(g==null?l.removeAttribute("class"):l.className=g),l.__className=t}return u}function Ge(l,r,t,f){var w=l.__style;if(F||w!==r){var u=ia(r);(!F||u!==l.getAttribute("style"))&&(u==null?l.removeAttribute("style"):l.style.cssText=u),l.__style=r}return f}function na(l,r){console.log("비디오 클릭됨"),r()}var oa=R('<div class="flex justify-center items-center h-64"><div class="text-xl text-white">비디오 목록을 불러오는 중...</div></div>'),da=R('<div class="bg-red-900 border border-red-400 text-red-200 px-4 py-3 text-center"><p class="font-bold">오류 발생</p> <p> </p></div>'),va=R('<div class="bg-yellow-900 border border-yellow-400 text-yellow-200 px-4 py-3 text-center"><p class="font-bold">비디오 없음</p> <p>static/videos 폴더에 비디오 파일을 추가해주세요.</p></div>'),ca=R('<button class="absolute top-4 right-4 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2  transition-all duration-300 backdrop-blur-sm" aria-label="전체화면"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path></svg></button>'),fa=R('<div class="absolute inset-0 flex items-center justify-center pointer-events-none"><div class="bg-black bg-opacity-50 rounded-full p-4"><svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></div></div>'),ua=R('<div class="absolute inset-0 flex items-center justify-center cursor-pointer bg-black bg-opacity-30 hover:bg-opacity-40 transition-all duration-300"><div class="text-center"><div class="mb-4"><svg class="w-16 h-16 text-white mx-auto opacity-80" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></div> <p class="text-white text-xl font-medium drop-shadow-lg">플레이하려면 화면을 클릭해주세요</p></div></div>'),ha=R('<div class="text-sm text-white flex gap-8"><div class="flex items-center gap-2"><kbd class="px-2 py-1 bg-gray-800 border border-white rounded text-xs w-15 text-center flex-shrink-0">Space</kbd> <span class="flex-1">재생/일시정지</span></div> <div class="flex items-center gap-2"><kbd class="px-2 py-1 bg-gray-800 border border-white rounded text-xs w-15 text-center flex-shrink-0">Cmd+E</kbd> <span class="flex-1">다음 비디오로 건너뛰기</span></div> <div class="flex items-center gap-2"><kbd class="px-2 py-1 bg-gray-800 border border-white rounded text-xs w-15 text-center flex-shrink-0">F</kbd> <span class="flex-1">전체화면</span></div></div>'),pa=R('<div class="w-2 h-2 bg-white rounded-full animate-pulse"></div>'),ga=$t('<svg class="w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>'),_a=R('<div role="button" tabindex="0"><div class="flex items-center justify-between"><div class="flex-1 min-w-0"><p class="text-sm font-medium text-white truncate"> </p></div> <div class="flex-shrink-0 w-4 flex items-center justify-center"><!></div></div></div>'),ma=R('<div class="w-full lg:w-80 xl:w-96 space-y-4 flex-shrink-0"><div class="bg-black border border-white shadow-lg p-6"><div class="mb-4"><h3 class="text-xl font-bold text-white mb-2">현재 재생 중</h3> <p class="text-white"> </p> <p class="text-sm text-gray-300"> </p></div> <div class="flex items-center space-x-2 text-sm"><div class="flex items-center space-x-1"><div></div> <span class="text-white"> </span></div></div></div> <div class="bg-black border border-white shadow-lg p-6"><h3 class="text-lg font-bold text-white mb-4">재생 목록</h3> <div class="space-y-2 max-h-96 overflow-y-auto"></div></div></div>'),ya=R('<div><div><div><div><video class="w-full h-full object-contain transition-opacity duration-300 cursor-pointer" preload="metadata" playsinline=""></video> <div class="absolute inset-0 flex items-center justify-center pointer-events-none transition-opacity duration-300"><h2 class="text-white text-4xl lg:text-5xl font-bold text-center px-4 drop-shadow-lg"> </h2></div> <!> <!> <!></div> <!></div></div> <!></div>',2),xa=R("<div><div><!></div></div>");function Ia(l,r){Jt(r,!0);let t=X(r,"isPlaying",15,!1),f=X(r,"showUI",3,!0),w=X(r,"forceAspectRatio",3,!0),u=X(r,"fullscreen",3,!1),h=X(r,"autoStart",3,!1),g=X(r,"videos",3,null),y=X(r,"currentVideoIndex",3,null),s=L(Qt([])),_=L(0),o=L(void 0),d=L(!0),E=L(null),n=L(0),c=L(0),v=L(!1),P=L(!1),T=L(void 0),p=L(!1);const x=Zt(()=>e(s)[e(_)]);Tt(async()=>(Array.isArray(g())&&g().length>0?(i(s,g()),typeof y()=="number"&&y()>=0&&y()<e(s).length&&i(_,y()),e(s).length>0&&h()&&await te(),i(d,!1)):(await S(),h()&&e(s).length>0&&I()),document.addEventListener("keydown",oe),document.addEventListener("fullscreenchange",ne),()=>{document.removeEventListener("keydown",oe),document.removeEventListener("fullscreenchange",ne)})),qe(()=>{Array.isArray(g())&&g().length>0&&(e(s).length===0||e(s)!==g())&&(i(s,g()),i(d,!1),h()&&e(s).length>0&&!t()&&!e(p)&&(typeof y()=="number"&&y()>=0&&y()<e(s).length&&i(_,y()),te()))}),qe(()=>{h()&&Array.isArray(e(s))&&e(s).length>0&&typeof y()=="number"&&y()>=0&&y()<e(s).length&&y()!==e(_)&&ee(y())});const A="/build";async function S(){try{i(d,!0);const a=await fetch(`${A}/api/videos`);if(!a.ok)throw new Error("비디오 목록을 불러올 수 없습니다.");const D=await a.json();i(s,Array.isArray(D)?D:[],!0)}catch(a){console.error("비디오 목록 로드 실패:",a),i(s,[],!0)}finally{i(d,!1),h()&&e(s).length>0&&!t()&&!e(p)&&te()}}async function I(){if(!e(x)||!e(o)){console.log("비디오 시작 실패 - currentVideo:",e(x),"videoElement:",e(o));return}console.log("비디오 시작:",e(x).displayName),i(n,0),i(c,1),t(!1),i(v,!1),e(o).load();try{await new Promise((a,D)=>{const ae=setTimeout(()=>D(new Error("로딩 타임아웃")),1e4);e(o).addEventListener("loadeddata",()=>{clearTimeout(ae),a()},{once:!0})}),console.log("비디오 로드 완료, 5초 후 재생 시작..."),setTimeout(async()=>{if(e(o))try{console.log("비디오 재생 시도..."),e(o).muted=!1,await e(o).play(),i(n,1),i(c,0),t(!0),console.log("비디오 재생 성공!")}catch(a){console.error("비디오 재생 실패:",a),console.log("자동재생이 차단되었습니다. 수동 재생 버튼을 클릭하세요."),i(n,.3),i(c,.5)}},5e3)}catch(a){console.error("비디오 로딩 실패:",a),i(E,"비디오를 로드할 수 없습니다: "+a.message)}}function j(){console.log("비디오 종료됨"),t()&&(t(!1),i(n,0),setTimeout(()=>{C()},1e3))}function C(){console.log("다음 비디오로 전환"),i(_,(e(_)+1)%e(s).length),I()}function q(){if(console.log("재생/일시정지 토글 - isPlaying:",t(),"isPaused:",e(v)),!e(o)){console.log("비디오 엘리먼트가 없습니다.");return}if(!t()){console.log("아직 재생이 시작되지 않았습니다.");return}e(v)?(console.log("재생 재개"),e(o).play(),i(v,!1)):(console.log("일시정지"),e(o).pause(),i(v,!0))}function Y(){console.log("다음 비디오로 건너뛰기"),!(!e(o)||!t())&&(t(!1),i(n,0),setTimeout(()=>{C()},300))}function K(){e(T)&&(document.fullscreenElement?document.exitFullscreen():e(T).requestFullscreen())}function ne(){i(P,!!document.fullscreenElement)}function oe(a){console.log("키 입력:",a.key,a.code),(a.metaKey||a.ctrlKey)&&a.key==="e"&&(a.preventDefault(),Y()),a.code==="Space"&&(a.preventDefault(),q()),a.key==="Escape"&&e(P)&&K(),(a.key==="f"||a.key==="F")&&(a.preventDefault(),K())}function ee(a){console.log("비디오 선택:",a),!(a<0||a>=e(s).length)&&(t()&&e(o)&&e(o).pause(),i(_,a,!0),I())}async function te(){if(!e(x)||!e(o)){console.log("비디오 시작 실패 - currentVideo:",e(x),"videoElement:",e(o));return}console.log("즉시 비디오 시작:",e(x).displayName),i(n,0),i(c,1),t(!0),i(v,!1),i(p,!0),e(o).load();try{await new Promise((a,D)=>{const ae=setTimeout(()=>D(new Error("로딩 타임아웃")),1e4);e(o).addEventListener("loadeddata",()=>{clearTimeout(ae),a()},{once:!0})}),console.log("비디오 로드 완료, 즉시 재생 시작..."),setTimeout(async()=>{if(e(o))try{console.log("비디오 재생 시도..."),e(o).muted=!1,await e(o).play(),i(n,1),i(c,0),t(!0),console.log("비디오 재생 성공!")}catch(a){console.error("비디오 재생 실패:",a),i(n,.3),i(c,.8)}},3e3)}catch(a){console.error("비디오 로딩 실패:",a),i(E,"비디오를 로드할 수 없습니다: "+a.message)}}function et(a){!Array.isArray(e(s))||e(s).length===0||a<0||a>=e(s).length||(t()&&e(o)&&e(o).pause(),i(_,a,!0),I())}async function tt(a){!Array.isArray(e(s))||e(s).length===0||a<0||a>=e(s).length||(t()&&e(o)&&e(o).pause(),i(_,a,!0),await te())}var de=xa(),pe=k(de),at=k(pe);{var rt=a=>{var D=oa();V(a,D)},lt=a=>{var D=ze(),ae=Ye(D);{var st=G=>{var J=da(),ve=M(k(J),2),ge=k(ve,!0);b(ve),b(J),ie(()=>$(ge,e(E))),V(G,J)},it=G=>{var J=ze(),ve=Ye(J);{var ge=Q=>{var W=va();V(Q,W)},nt=Q=>{var W=ya(),ce=k(W),_e=k(ce),re=k(_e),O=k(re);O.__click=[na,q],Xe(O,m=>i(o,m),()=>e(o));var fe=M(O,2),Ce=k(fe),ot=k(Ce,!0);b(Ce),b(fe);var Me=M(fe,2);{var dt=m=>{var N=ca();N.__click=K,V(m,N)};U(Me,m=>{e(P)||m(dt)})}var Ne=M(Me,2);{var vt=m=>{var N=fa();V(m,N)};U(Ne,m=>{e(v)&&t()&&m(vt)})}var ct=M(Ne,2);{var ft=m=>{var N=ua();N.__click=te,V(m,N)};U(ct,m=>{!t()&&!e(p)&&!h()&&m(ft)})}b(re),Xe(re,m=>i(T,m),()=>e(T));var ut=M(re,2);{var ht=m=>{var N=ha();V(m,N)};U(ut,m=>{f()&&m(ht)})}b(_e),b(ce);var pt=M(ce,2);{var gt=m=>{var N=ma(),me=k(N),ye=k(me),xe=M(k(ye),2),_t=k(xe,!0);b(xe);var Pe=M(xe,2),mt=k(Pe);b(Pe),b(ye);var Re=M(ye,2),Se=k(Re),De=k(Se),Le=M(De,2),yt=k(Le,!0);b(Le),b(Se),b(Re),b(me);var Fe=M(me,2),Oe=M(k(Fe),2);ra(Oe,21,()=>e(s),ta,(ue,xt,he)=>{var Z=_a();Z.__click=()=>ee(he),Z.__keydown=B=>{(B.key==="Enter"||B.key===" ")&&(B.preventDefault(),ee(he))};var Be=k(Z),be=k(Be),He=k(be),bt=k(He,!0);b(He),b(be);var je=M(be,2),wt=k(je);{var kt=B=>{var we=pa();V(B,we)},Et=B=>{var we=ga();V(B,we)};U(wt,B=>{he===e(_)?B(kt):B(Et,!1)})}b(je),b(Be),b(Z),ie(()=>{z(Z,1,`p-3 transition-colors duration-200 cursor-pointer ${he===e(_)?"bg-gray-800 border-l-4 border-white":"bg-gray-900 hover:bg-gray-800 hover:shadow-white/20"}`),$(bt,e(xt).displayName)}),V(ue,Z)}),b(Oe),b(Fe),b(N),ie(()=>{var ue;$(_t,((ue=e(x))==null?void 0:ue.displayName)||"비디오 없음"),$(mt,`${e(_)+1} / ${e(s).length??""}`),z(De,1,`w-2 h-2 rounded-full ${t()?"bg-green-500":"bg-gray-400"}`),$(yt,t()?e(v)?"일시정지":"재생 중":"대기 중")}),V(m,N)};U(pt,m=>{f()&&m(gt)})}b(W),ie(()=>{var m;z(W,1,`flex flex-col lg:flex-row gap-6 ${u()?"h-screen":"h-full"}`),z(ce,1,f()?"flex-1":"w-full h-full"),z(_e,1,`flex flex-col gap-4 ${u()?"h-full":""}`),z(re,1,`relative w-full bg-black overflow-hidden shadow-lg ${w()?"aspect-video":u()?"h-full max-h-screen":"h-full"}`),ea(O,"src",e(x)?`${A}/videos/${e(x).name}`:""),Ge(O,`opacity: ${e(n)??""}`),Ge(fe,`opacity: ${e(c)??""}`),$(ot,((m=e(x))==null?void 0:m.displayName)||"")}),le("ended",O,j),le("play",O,()=>{t(!0),i(v,!1),i(n,1),i(c,0),i(p,!0)}),le("pause",O,()=>{i(v,!0)}),le("waiting",O,()=>{}),le("loadeddata",O,()=>{}),V(Q,W)};U(ve,Q=>{e(s).length===0?Q(ge):Q(nt,!1)},!0)}V(G,J)};U(ae,G=>{e(E)?G(st):G(it,!1)},!0)}V(a,D)};U(at,a=>{e(d)?a(rt):a(lt,!1)})}return b(pe),b(de),ie(()=>{z(de,1,u()?"w-full h-full overflow-hidden":"min-h-screen bg-black"),z(pe,1,u()?"w-full h-full overflow-hidden":"max-w-7xl mx-auto")}),V(l,de),Wt({playIndex:et,playIndexImmediately:tt})}At(["click","keydown"]);export{Ia as V,ra as e,ta as i,Ge as s};
